{% set page_title = current_page.title|default(site_title) %}
{% set is_home = (current_page.id|default('')) in ['index', ''] %}
{% set full_title = is_home ? page_title : (page_title ~ ' - ' ~ site_title) %}
{% set desc = meta.description|default(meta.Description|default(pages.index.meta.description|default(''))) %}
{% set canonical = current_page.url|default(base_url ~ '/') %}
{% set robots = meta.robots|default(meta.Robots|default('')) %}

<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>{{ full_title }}</title>
  {% if desc %}<meta name="description" content="{{ desc }}">{% endif %}
  <link rel="canonical" href="{{ canonical }}">
  {% if robots %}<meta name="robots" content="{{ robots }}">{% endif %}
  <link rel="stylesheet" href="{{ theme_url }}/assets/style.css">
</head>
<body class="t-i">
  <a class="skip-link" href="#main">跳到正文</a>
  <div class="doc">
    <aside class="sidebar" aria-label="目录">
      <div class="brand"><a href="{{ base_url }}/">{{ site_title }}</a></div>
      <div class="search" aria-label="搜索占位">
        <input type="search" placeholder="搜索（占位）" disabled>
      </div>
      <nav class="toc" aria-label="站点页面">
        <a href="{{ base_url }}/news/">新闻</a>
        {% for p in pages() %}{% if not p.hidden and p.id not in ['404'] %}
          <a href="{{ p.url }}">{{ p.title }}</a>
        {% endif %}{% endfor %}
      </nav>

      {# Unique block (i only): Shortcut keys cheat sheet #}
      <div class="keys">
        <div class="keys-title">快捷键</div>
        <div class="keys-row"><span>J/K</span><span>滚动</span></div>
        <div class="keys-row"><span>/</span><span>搜索</span></div>
      </div>
    </aside>

    <main id="main" class="doc-main">
      <header class="doc-header">
        <a class="home" href="{{ base_url }}/">首页</a>
        <span class="sep">/</span>
        <span class="crumb">{{ current_page.title|default('') }}</span>
      </header>
      {% block main %}{% endblock %}
      <footer class="doc-footer"><small>&copy; {{ "now"|date("Y") }} {{ site_title }}</small></footer>
    </main>
  </div>
</body>
</html>
