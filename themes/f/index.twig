{% extends 'base.twig' %}

{% block main %}
  {% set page_id = current_page.id|default('') %}
  {% set is_404 = page_id == '404' or (page_id|split('/')|last) == '404' %}
  {% set is_news_index = page_id in ['news', 'news/index'] %}
  {% set is_news_item = page_id|slice(0, 5) == 'news/' and not is_news_index %}

  {% if is_404 %}
    <header class="page-header"><h1>{{ current_page.title|default('404') }}</h1></header>
    <article class="content">{{ content }}</article>
  {% elseif is_news_index %}
    {% include 'news/index.twig' %}
  {% elseif is_news_item %}
    {% include 'news/item.twig' %}
  {% else %}
    {% if page_id in ['index',''] %}
      <section class="hero">
        <h1 class="hero-title">{{ current_page.title|default(site_title) }}</h1>
        <p class="hero-desc">{{ meta.description|default(meta.Description|default('')) }}</p>
        <div class="hero-actions">
          <a class="btn" href="{{ base_url }}/news/">看最新新闻</a>
          <a class="btn btn-ghost" href="#content">阅读正文</a>
        </div>
      </section>
    {% endif %}
    <header class="page-header" id="content"><h2>{{ current_page.title|default(site_title) }}</h2></header>
    <article class="content">{{ content }}</article>
  {% endif %}
{% endblock %}
