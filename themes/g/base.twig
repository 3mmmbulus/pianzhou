{% set page_title = current_page.title|default(site_title) %}
{% set is_home = (current_page.id|default('')) in ['index', ''] %}
{% set full_title = is_home ? page_title : (page_title ~ ' - ' ~ site_title) %}
{% set desc = meta.description|default(meta.Description|default(pages.index.meta.description|default(''))) %}
{% set canonical = current_page.url|default(base_url ~ '/') %}
{% set robots = meta.robots|default(meta.Robots|default('')) %}

<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>{{ full_title }}</title>
  {% if desc %}<meta name="description" content="{{ desc }}">{% endif %}
  <link rel="canonical" href="{{ canonical }}">
  {% if robots %}<meta name="robots" content="{{ robots }}">{% endif %}
  <link rel="stylesheet" href="{{ theme_url }}/assets/style.css">
</head>
<body class="t-g site">
  <a class="skip-link" href="#main">跳到正文</a>
  <div class="shell">
    <aside class="rail" aria-label="侧边导航">
      <div class="rail-inner">
        <a class="logo" href="{{ base_url }}/">{{ site_title }}</a>
        <nav class="rail-nav" aria-label="主导航">
          <a href="{{ base_url }}/">首页</a>
          <a href="{{ base_url }}/news/">新闻</a>
          {% for p in pages() %}{% if not p.hidden and p.id not in ['404','news','news/index'] %}
            <a href="{{ p.url }}">{{ p.title }}</a>
          {% endif %}{% endfor %}
        </nav>

        {# Unique block (g only): Status pill stack #}
        <div class="unique-g">
          <p class="pill">结构：侧边栏固定</p>
          <p class="pill">列表：卡片网格</p>
        </div>
      </div>
    </aside>

    <main id="main" class="stage site-main">
      {% block main %}{% endblock %}
      <footer class="site-footer"><small>&copy; {{ "now"|date("Y") }} {{ site_title }}</small></footer>
    </main>
  </div>
</body>
</html>
