##
# 基础
#
site_title: 主优化词                 # 站点主优化词
base_url: ~                         # 自动猜测站点基础 URL，失败时可在此填写；示例：https://example.com/wwppcms/
rewrite_url: true                      # 是否强制启用 URL 重写（true/false）
debug: ~                            # 设为 true 启用 Wwppcms 调试模式
timezone: ~                         # 若 PHP 需要手动设置时区，可在此指定
locale: ~                           # 若 PHP 需要手动设置区域设置，可在此指定

##
# 主题
#
theme: d                      # 自定义主题名称
themes_url: ~                       # 自动猜测主题目录 URL，失败时在此填写；示例：https://example.com/wwppcms/themes/
theme_config:                       # 主题额外配置
    widescreen: false               # 默认主题：使用更宽的布局
twig_config:                        # Twig 模板引擎配置
    autoescape: html                # 默认对变量开启转义
    strict_variables: false         # 设为 true 时，未定义变量会导致错误
    charset: utf-8                  # 模板字符集
    debug: ~                        # 启用 Twig 调试模式
    cache: false                    # 指定可写目录以启用 Twig 缓存
    auto_reload: ~                  # 模板变更时自动重新编译

##
# 内容
#
date_format: "%Y-%m-%d %H:%M"       # Wwppcms 默认中文日期格式；参考 https://php.net/manual/en/function.strftime.php
pages_order_by_meta: author         # 按元数据 author 排序（pages_order_by 设为 meta）
pages_order_by: alpha               # 页面排序方式：alpha/date/meta
pages_order: asc                    # 排序方向：asc/desc
content_dir: ~                      # 内容目录路径
content_ext: .md                    # Markdown 文件扩展名
content_config:                     # Parsedown Markdown 解析配置
    extra: true                     # 使用 Parsedown Extra 支持扩展语法；见 https://michelf.ca/projects/php-markdown/extra/
    breaks: false                   # 是否保留换行
    escape: false                   # 是否转义内容中的 HTML（非安全模式，不用于不可信输入）
    auto_urls: true                 # 自动为内容中的 URL 添加链接
assets_dir: assets/                 # 静态资源目录路径
assets_url: ~                       # 自动猜测资源目录 URL，失败时在此填写；示例：https://example.com/wwppcms/assets/

##
# 插件
#
plugins_url: ~                      # 自动猜测插件目录 URL，失败时在此填写；示例：https://example.com/wwppcms/plugins/
DummyPlugin.enabled: false          # 强制禁用 DummyPlugin
WwppcmsDeprecated.enabled: true     # 提供旧版本 API/主题的兼容层
# PpwwcmsIndexNow 示例（取消注释启用主动推送）
PpwwcmsIndexNow:
  enabled: true
  key: a1b2c3d4e5f67890abcdef1234567890        # 同时需在站点根目录放置 /indexnow.txt，文件内容即此 key
  endpoint: https://api.indexnow.org/indexnow
  min_interval: 3600                 # 同一 URL 最小推送间隔（秒）


# PpwwcmsSchemaLd 示例（取消注释启用；字段优先级：页面 front-matter > 此处配置 > 自动兜底）
# PpwwcmsSchemaLd:
#   website:
#     name: 示例站点名
#     url: https://example.com/
#     search_url: https://example.com/search?q={search_term_string}
#   organization:
#     name: 示例公司
#     url: https://example.com/
#     logo: https://example.com/assets/logo.png
#     sameAs: [https://twitter.com/example, https://www.linkedin.com/company/example]
#   breadcrumb:
#     - name: 首页
#       url: https://example.com/
#   article:
#     author: 示例作者
#     section: 教程
#     tags: [标签A, 标签B]
#   itemList:
#     items:
#       - name: 推荐一
#         url: https://example.com/a
#       - name: 推荐二
#         url: https://example.com/b
#   faq:
#     items:
#       - question: 问题1？
#         answer: 回答1。
#       - question: 问题2？
#         answer: 回答2。
# PpwwcmsOg 示例（取消注释以启用并自定义默认 OG/Twitter/Article/Robots）
# PpwwcmsOg:
#   og:
#     title: 站点默认 OG 标题            # 可被页面 front-matter 的 og.title 覆盖
#     description: 站点默认 OG 描述        # 可被页面 front-matter 的 og.description 覆盖
#     url: https://example.com/           # 如不填自动使用当前页面 URL
#     type: website                       # 常用 website / article
#     site_name: 我的站点名称
#     image: https://example.com/assets/og-cover.png
#     locale: zh_CN
#     image_width: 1200
#     image_height: 630
#   twitter:
#     card: summary_large_image           # 默认 summary_large_image
#     title: 默认 Twitter 标题             # 可被页面 front-matter 的 twitter.title 覆盖
#     description: 默认 Twitter 描述       # 可被页面 front-matter 的 twitter.description 覆盖
#     image: https://example.com/assets/og-cover.png
#   article:
#     published_time: 2024-01-01T00:00:00+08:00
#     modified_time: 2024-01-02T12:00:00+08:00
#     author: 作者姓名
#     section: 栏目名称
#     tags: [标签1, 标签2]
#   robots: index,follow                 # 若主题未输出 robots，可在此设置默认 robots

PpwwcmsOg:
  og:
    url: 
    type: website
    locale: zh_CN
    image_width: 1200
    image_height: 630
  twitter:
    card: summary_large_image
  article:
  robots: index,follow
# PpwwcmsRobots 示例（取消注释并按需修改即可自定义 robots.txt 与 sitemap）
# PpwwcmsRobots:
#   robots:
#     - user_agents: "*"
#       disallow: []                # 留空表示允许全部
#       allow: ["/"]
#     - user_agents: "AhrefsBot"
#       disallow: ["/"]            # 禁止某些爬虫
#   sitemap:
#     - url: %base_url%/custom-page # 额外加入自定义 URL
#       changefreq: weekly
#       priority: 0.7
##
# 自定义
#
my_custom_setting: Hello World!     # 在主题中可用 {{ config.my_custom_setting }} 访问此设置


# 下面是广告的配置信息
#
# 注意：YAML 的顶级键名必须是 PpwwcmsAds
# 将本段合并到站点的 config/config.yml 中（重要）
#
# 你要做的事：
# 1) 打开站点配置：fzxingluo.com/index/config/config.yml
# 2) 把下面整段（从 PpwwcmsAds: 开始）复制进去
# 3) 按你的需要改 slot 名称、路径规则、素材内容
#
# 注意：YAML 的顶级键名必须是 PpwwcmsAds（大小写也要一致）
# 说明：
# - “placements” 是把广告位挂到主题区域/正文区域
# - “slots” 才是真正定义广告内容、规则、频控、设备等
# - placements 里写的值（比如 header: header_banner）必须能在 slots 里找到同名的 slot

PpwwcmsAds:
  # 总开关：
  # - true  启用插件
  # - false 关闭插件（所有广告都不输出）
  enabled: true

  # 当页面本身是 noindex 时是否自动禁用广告：
  # - true  建议开启：避免 noindex 页还插广告
  # - false 即使页面 noindex 也照样插广告（一般不推荐）
  disable_on_noindex: true

  # 是否启用正文短码（最简单的“在正文里插广告”的方式）：
  # - true  启用：你在 Markdown 正文里写 [[ads:slot-name]] 就会被替换成广告
  # - false 禁用：正文里写了也不会替换
  #
  # 例子：
  #   文章正文写：
  #     这里是一段文字...
  #     [[ads:in_article_1]]
  #     这里是下一段...
  
  shortcode: true

  # 主题级广告位绑定（把 slot 映射到“页面区域”）
  #
  # 说明：
  # - header/footer/sidebar 需要你的主题 Twig 模板输出 pico_ads.header/footer/sidebar 才能看到（推荐做一次主题接入）
  # - content_top/content_bottom/after_paragraph 是“正文内容注入”，不改主题也能生效
  #
  # 你可以只用其中一部分：
  # - 只用正文注入：保留 content_* / after_paragraph
  # - 只用主题区域：保留 header/footer/sidebar
  placements:
    # 主题头部区域广告：对应 slots 里的 header_banner
    header: header_banner
    # 主题底部区域广告
    footer: footer_banner
    # 主题侧边栏区域广告
    sidebar: sidebar_box

    # 正文最上方插入一个广告（会拼到正文 HTML 最前面）
    # about 页面正文里没有 <p> 段落时，after_paragraph 不会生效；用 content_top 更稳。
    content_top: about_top_img
    # 正文最下方插入一个广告（会拼到正文 HTML 最末尾）
    content_bottom: content_bottom

    # 在第 N 段之后插入广告（段落的概念通常是 <p> 或换行分段）
    # - n: 2 表示“第2段之后”
    # - slot: 要插入的 slot 名
    # 小提醒：多条 after_paragraph 会从“大 n 到小 n”插入，避免段落序号被前一次插入影响
    after_paragraph:
      - n: 2
        slot: in_article_text
      - n: 3
        slot: in_article_img

  # 运行时脚本（前端 JS）：
  # 负责这些功能：
  # - 频控（frequency）：比如“每个用户每天最多显示 10 次”
  # - 设备限制（device）：只在手机/只在电脑显示
  # - lazy（懒加载）：广告进入视口附近才显示
  # - 侵入式 overlay（弹窗倒计时、点击跳转、关闭按钮）
  #
  # 大多数情况下你不用管它，插件会在需要时自动注入 pico_ads._runtime
  runtime:
    # force:
    # - false（默认）仅当你使用了频控/设备/lazy/侵入式时才注入脚本（更省性能）
    # - true  无论有没有用到也注入（一般不需要）
    force: false

    # external.enabled:
    # - true  使用外链 JS：页面只输出 <script src="/ads/runtime.js">（推荐，更“干净”）
    # - false 使用内联 JS：页面源码会看到一大段 <script>...</script>
    external:
      enabled: true

  # 全局定向参数
  targeting:
    # mobile_breakpoint：
    # - 用于区分“手机/电脑”的断点宽度（px）
    # - device=mobile/desktop 的判断依据就是这个
    mobile_breakpoint: 768

  # 合规（强烈建议保持默认/或更严格）
  compliance:
    # 广告标识文字（会显示在每个广告 wrapper 里）
    label_text: "广告"
    # 广告标识的 class（你可以在主题 CSS 里定义样式）
    label_class: "ppww-ads__label"
    # 广告整体 wrapper 的 class（所有广告外层都有这个 class）
    wrapper_class: "ppww-ads"
    # 是否给广告链接加 nofollow：
    # - false 默认只加 rel="sponsored"
    # - true  加 rel="sponsored nofollow"
    nofollow: true

  # 安全（默认最安全）
  security:
    # html_mode：
    # - whitelist（默认，推荐）：会对 creatives.type=html 的内容做白名单清洗，尽量防 XSS
    # - raw（不推荐）：完全原样输出 HTML（风险很高，只有你确认内容完全可信才用）
    html_mode: whitelist   # whitelist|raw

    # allow_script：
    # - false（默认）即使 raw，也会尽量阻止/清理 script（更安全）
    # - true  允许输出 <script>（风险更高；仅当你确实要投第三方脚本才开启）
    allow_script: false

    # csp_nonce：
    # - 如果你站点启用了 CSP，并且需要给广告脚本加 nonce，可以打开
    # - 插件会生成 pico_ads.csp_nonce，并给运行时 <script> 加 nonce
    csp_nonce:
      enabled: false

  # 可观测性（日志统计）
  observability:
    # enabled:
    # - true  记录聚合统计到 plugins/PpwwcmsAds/logs/YYYY-MM-DD.json
    # - false 不写日志
    enabled: true

  # 侵入式（高风险！带护栏）
  #
  # 这是“弹窗/遮罩/倒计时/点击跳转”那一套。
  # 默认关闭。你要用必须显式开启，并且只对指定 paths 生效。
  intrusive:
    # 总开关：
    # - false 默认关闭（建议）
    # - true  开启侵入式（只建议用于你明确需要的落地页）
    enabled: false

    # 仅这些路径生效（强制护栏）：
    # - 这里写的是“允许弹窗出现的页面路径”，没匹配就绝不弹
    # - 写法建议用 glob（最直观）：
    #   "/landing/*"  表示 /landing/ 下的所有路径
    #   "/"          表示首页
    #
    # 注意：这不是 slot 的 targeting，而是“侵入式总开关的路径白名单”
    paths:
      - "/landing/*"

    # overlay_slot：
    # - 指定“弹窗里要展示的广告内容”来自哪个 slot
    # - 这个 slot 也需要在 slots: 里定义
    overlay_slot: intrusive_overlay

    # countdown_seconds：
    # - 弹窗出现后，关闭按钮需要等待多少秒才能点击（倒计时）
    # - 设为 0 表示不倒计时
    countdown_seconds: 5

    # cta_url：
    # - 弹窗里的“行动按钮（CTA）”点击跳转到哪里
    # - 插件只允许“用户点击触发跳转”，不会做 301 强制跳转（护栏）
    cta_url: "https://example.com/"

    # force_noindex：
    # - true（默认建议）：侵入式页面自动强制 noindex,nofollow（meta + X-Robots-Tag）
    # - false 不强制（不建议，容易引起 SEO 风险）
    force_noindex: true

    # frequency（侵入式弹窗频控）：
    # - 用 localStorage 做“同一路径多久最多弹一次”，避免每次打开都弹
    frequency:
      enabled: true
      # ttl_seconds：
      # - 86400 表示 24 小时
      # - 3600  表示 1 小时
      ttl_seconds: 86400

  # 具体广告位（slot）定义（核心！）
  #
  # slot 的结构一般是：
  # slots:
  #   slot_name:
  #     targeting: ...  （这个广告位在哪些页面/设备/来源允许展示）
  #     frequency: ...  （频控：每用户每小时/每天最多展示几次）
  #     lazy: ...       （是否懒加载）
  #     creatives:      （素材列表：可以多条，支持权重轮播/A-B）
  #       - id: ...
  #         type: image|links|html
  #         ...
  slots:
    header_banner:
      targeting:
        # path_include：路径白名单（命中才显示）
        # 典型写法：
        # - "/" 首页
        # - "/posts/*" 文章列表/文章页
        path_include:
          - "/"
          - "/posts/*"
      frequency:
        # window:
        # - day  按“每天”计数
        # - hour 按“每小时”计数
        window: day   # day|hour
        # max：在这个 window 内最多展示多少次（每个用户，用 localStorage 实现）
        max: 10
        # scope：
        # - slot（默认）按 slot 统计
        # - 预留字段（当前实现等同 slot）
        scope: slot
      # lazy：
      # - true  懒加载（进入视口附近才显示）
      # - false 立即显示
      lazy: false
      creatives:
        # creatives：素材列表
        # - 可以多条，通过 weight 做加权轮播（用于 A/B 测试很方便）
        - id: h1
          weight: 100
          # type:
          # - image 图片广告（可选 href）
          # - links 链接列表
          # - html  自定义 HTML（默认会做白名单清洗）
          type: image
          src: "/assets/ads/header-1.jpg"
          href: "https://advertiser.example/"
          alt: "赞助"

    sidebar_box:
      targeting:
        # device：设备限制
        # - all（默认）手机电脑都显示
        # - mobile 只在手机显示
        # - desktop 只在电脑显示
        device: all  # all|mobile|desktop
        path_include:
          - "/posts/*"
      creatives:
        - id: s1
          type: links
          # links 类型：items 是多个链接
          items:
            - text: "合作伙伴 A"
              url: "https://a.example/"
            - text: "合作伙伴 B"
              url: "https://b.example/"

    in_article_1:
      targeting:
        path_include:
          - "/posts/*"
      creatives:
        - id: c1a
          type: html
          weight: 50
          # html 类型：可以写简单的 HTML 片段
          # 默认会 whitelist 清洗：
          # - 建议只放安全标签（div/span/a/img 等）
          # - 不要放复杂脚本（默认会被清理/阻止）
          html: "<div>赞助内容 A</div>"
        - id: c1b
          type: html
          weight: 50
          html: "<div>赞助内容 B</div>"

    # 文章内：文字广告（可点击）
    # - 名字我给你用“ 一页博彩导航入口 ”：直观表达是导航入口
    # - 注意：href 必须带 http/https，否则点击统计的 /ads/click 会判定无效
    in_article_text:
      targeting:
        include:
          - "/news/*"
          - "/"
      creatives:
        - id: txt1
          type: html
          weight: 100
          html: "<a class='ppww-ads__link' href='https://baidu.com/' target='_blank'>一页博彩导航入口</a>"

    # 文章内：图片广告（可点击）
    in_article_img:
      targeting:
        include:
          - "/news/*"
          - "/"
      creatives:
        - id: img1
          type: image
          weight: 100
          src: "/assets/ads/ads-yiye.gif"
          href: "https://baidu.com/"
          alt: "一页博彩导航"

    # about 页：顶部图片广告（不依赖段落数）
    about_top_img:
      targeting:
        include:
          - "/about"
          - "/about/"
      creatives:
        - id: about_img1
          type: image
          weight: 100
          src: "/assets/ads/ads-yiye.gif"
          href: "https://baidu.com/"
          alt: "一页博彩导航"

    intrusive_overlay:
      targeting:
        path_include:
          - "/landing/*"
      creatives:
        - id: ov1
          type: html
          # 侵入式弹窗里的内容也是一个 slot 的 creatives
          # 你可以把它写成“横幅/弹窗内容块”，样式建议在主题 CSS 里写（更可控）
          html: "<div style=\"padding:24px; background:#fff\">赞助内容</div>"
